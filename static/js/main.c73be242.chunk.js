(this["webpackJsonpreact-google-forms-example"]=this["webpackJsonpreact-google-forms-example"]||[]).push([[0],{172:function(e,t,r){"use strict";r.r(t);r(82);var n=r(0),a=r.n(n),i=r(74),o=r.n(i),l=r(1),u=r.n(l),c=r(7),s=r(2),d=r(3),f=r(80),m=r(75),p=r.n(m),b=r(37),v=r.n(b),O=r(19),E=r.n(O),g=r(76),h=r.n(g);"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function y(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var R,w,j,x,S,k=function(e,t,r){if(null===e)throw new Error("You need to wrap your form with a GoogleFormProvider");var n=e.getField(t);if(n.type!==r)throw new Error("Field with id "+n.id+" is not of type "+r);return n},I=["children"],A=Object(n.createContext)(null),C=function(){return Object(n.useContext)(A)},D=function(e){var t=e.children,r=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,I);return Object(n.createElement)(A.Provider,{value:r},t)},q=function(e,t){var r=C(),a=k(r,e,t),i=Object(n.useState)(!1),o=i[0],l=i[1],u=function(t){return r.register(e,_({required:a.required},t))},c=r.watch(e);Object(n.useEffect)((function(){"RADIO"===a.type?l(a.required&&c&&"__other_option__"===c):l(a.required&&c&&1===c.length&&c.includes("__other_option__"))}),[c,o]);var s=a.options.filter((function(e){return!e.custom})),d=function(t){return e+"-"+E()(t)},f={options:s.map((function(e){var t=d(e.label);return _({},e,{id:t,registerOption:function(t){return _({},u(_({},t)),{value:e.label})}})}))},m=a.options.find((function(e){return e.custom}));if(m){var p=d("__other_option__"),b=function(e){return e+"-other_option_response"}(p),v=r.formState.errors[b];f.customOption=_({},m,{id:p,registerOption:function(e){return void 0===e&&(e={}),_({},u(_({},e)),{value:"__other_option__"})},registerCustomInput:function(e){return void 0===e&&(e={}),r.register(b,_({required:o},e))},error:v})}var O=r.formState.errors[a.id];return _({},a,f,{error:O})},N=function(e){var t=e.form,r=Object(f.a)();r.getField=function(e){return function(e,t){var r=t.fieldsOrder[e];if(void 0===r)throw new Error("Field with id "+e+" wasn't found in your form");return t.fields[r]}(e,t)};return r.submitToGoogleForms=function(e){try{var r={};Object.keys(e).forEach((function(t){var n;r[(n=t,n.includes("other_option_response")?"entry."+n.replace("-__other_option__-other_option_response","")+".other_option_response":"entry."+n)]=e[t]}));var n=p.a.stringify(r,{skipNull:!0,skipEmptyString:!0}),a=y((function(){return Promise.resolve(v.a.get("https://docs.google.com/forms/d/"+t.action+"/formResponse?"+n+"&submit=Submit",{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).then((function(){}))}),(function(){}));return Promise.resolve(a&&a.then?a.then((function(){})):void 0)}catch(i){return Promise.reject(i)}},r},F=function(e,t){var r=C(),n=k(r,e,t),a=r.formState.errors[n.id];return _({},n,{register:function(t){return r.register(e,_({required:n.required},t))},error:a})},G=function(e,t){var r=C(),a=Object(n.useState)(void 0),i=a[0],o=a[1],l=k(r,e,t),u=function(t,r){return e+"-"+t+"-"+E()(r)};Object(n.useEffect)((function(){var e=l.lines.reduce((function(e,t){var n=r.formState.errors[t.id];return n&&(e[t.id]=n),e}),{});Object.keys(e).length>0?o(e):o(void 0)}),[r.formState.errors]);return _({},l,{renderGrid:function(e){return l.lines.map((function(t){return e(_({},t,{renderColumns:function(e){return l.columns.map((function(n){var a=u(t.id,n.label);return e(_({},n,{registerColumn:function(e){return _({},function(e){return r.register(t.id,_({required:l.required},e))}(e),{value:n.label})},id:a}))}))}}))}))},errors:i})},H=function(e){var t=C(),r=k(t,e,"DROPDOWN"),n=t.formState.errors[r.id],a=r.options.map((function(e){var t;return _({},e,{id:(t=e.label,r.id+"-"+E()(t))})}));return _({},r,{options:a,register:function(n){return t.register(e,_({required:r.required},n))},error:n})},L=function(e){var t=C(),r=k(t,e,"LINEAR"),n=function(n){return t.register(e,_({required:r.required},n))},a=t.formState.errors[r.id],i=r.options.map((function(e){var t,a=(t=e.label,r.id+"-"+E()(t));return _({},e,{id:a,registerOption:function(t){return _({},n(t),{value:e.label})}})}));return _({},r,{options:i,error:a})},P=function(e){return 1===e},W=function(e){return""+e},B=function(e){return e.map((function(e){return{label:e[0]}}))},T=function(e){var t={};t.label=e[1];var r=e[3];switch(t.type=function(e,t){return 7===t?1===function(e){return e[4][0][11][0]}(e)?"CHECKBOX_GRID":"RADIO_GRID":["SHORT_ANSWER","LONG_ANSWER","RADIO","DROPDOWN","CHECKBOX","LINEAR"][t]}(e,r),t.type){case"SHORT_ANSWER":case"LONG_ANSWER":var n=e[4][0];t.id=W(n[0]),t.required=P(n[2]);break;case"CHECKBOX":case"RADIO":var a=e[4][0];t.id=W(a[0]),t.options=a[1].map((function(e){return{label:e[0],custom:1===e[4]}})),t.required=P(a[2]);break;case"DROPDOWN":var i=e[4][0];t.id=W(i[0]),t.options=function(e){return e.map((function(e){return{label:e[0]}}))}(i[1]),t.required=P(i[2]);break;case"LINEAR":var o=e[4][0];t.id=W(o[0]);var l=o[3],u=l[0],c=l[1];t.legend={labelFirst:u,labelLast:c},t.options=B(o[1]),t.required=P(o[2]);break;case"CHECKBOX_GRID":case"RADIO_GRID":t.id=W(e[0]),t.columns=B(e[4][0][1]),t.lines=e[4].map((function(e){var t={};return t.id=W(e[0]),t.label=e[3][0],t})),t.required=P(e[4][0][2])}return t},K=function(e){var t=e.formData,r=e.fbzx,n={fvv:1,pageHistory:0};n.fbzx=r,n.action=t[14];var a=function(e){var t={};return{fields:e.map((function(e,r){var n=T(e);return t[""+n.id]=r,n})),fieldsOrder:t}}(t[1][1]),i=a.fields,o=a.fieldsOrder;return n.fields=i,n.fieldsOrder=o,n},X=function(e){try{var t,r=function(e){var r=function(e){var t=h.a.load(e),r=t('[name="fbzx"]').attr("value");if(!r)throw new Error("Invalid form. Couldn't find fbzx field.");var n=t("script").filter((function(e,r){return t(r).html().includes("var FB_PUBLIC_LOAD_DATA_ =")})).first().html();if(!n)throw new Error("Invalid form. Couldn't find script tag.");return n=(n=n.replace(";","")).replace("var FB_PUBLIC_LOAD_DATA_ =",""),{formData:JSON.parse(n),fbzx:r}}(t);return K(r)};!function(e){var t=new URL(e);if("docs.google.com"!==t.host)throw new Error("Invalid google forms host. It must be docs.google.com and is "+t.host+".");if(!t.pathname.endsWith("/viewform"))throw new Error("Please use the form's public URL.")}(e);var n=y((function(){return Promise.resolve(function(e){try{return Promise.resolve(v.a.get(e)).then((function(e){return e.data}))}catch(t){return Promise.reject(t)}}(e)).then((function(e){t=e}))}),(function(e){throw new Error("Failed to fetch form. "+e)}));return Promise.resolve(n&&n.then?n.then(r):r())}catch(a){return Promise.reject(a)}},U=r(38),z=d.a.div(R||(R=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),J=d.a.div(w||(w=Object(s.a)(["\n  display: flex;\n\n  & label {\n    margin: 0 10px;\n  }\n"])));function Y(e){var t=function(e){return q(e,"CHECKBOX")}(e.id),r=t.options,n=t.customOption;return a.a.createElement(z,null,r.map((function(e){return a.a.createElement(J,{key:e.id},a.a.createElement("input",Object.assign({type:"checkbox",id:e.id},e.registerOption())),a.a.createElement("label",{htmlFor:e.id},e.label))})),n&&a.a.createElement(J,null,a.a.createElement("input",Object.assign({type:"checkbox",id:n.id},n.registerOption())),a.a.createElement("label",{htmlFor:n.id},"Outra"),a.a.createElement("input",Object.assign({type:"text",placeholder:"Resposta aqui"},n.registerCustomInput()))))}var Q,M,V,Z,$=d.a.div(j||(j=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),ee=d.a.div(x||(x=Object(s.a)(["\n  display: flex;\n\n  & label {\n    margin: 0 10px;\n  }\n"]))),te=d.a.span(S||(S=Object(s.a)(["\n  color: red;\n  padding: 10px 0;\n"])));function re(e){var t=function(e){return q(e,"RADIO")}(e.id),r=t.options,n=t.customOption,i=t.error;return a.a.createElement($,null,r.map((function(e){return a.a.createElement(ee,{key:e.id},a.a.createElement("input",Object.assign({type:"radio",id:e.id},e.registerOption())),a.a.createElement("label",{htmlFor:e.id},e.label))})),n&&a.a.createElement(ee,null,a.a.createElement("input",Object.assign({type:"radio",id:n.id},n.registerOption())),a.a.createElement("label",{htmlFor:n.id},"Outra"),a.a.createElement("input",Object.assign({type:"text",placeholder:"Resposta aqui"},n.registerCustomInput()))),a.a.createElement(te,null,i&&"This field is required"))}function ne(e){var t=function(e){return F(e,"SHORT_ANSWER")}(e.id).register;return a.a.createElement("div",null,a.a.createElement("input",Object.assign({type:"text"},t())))}function ae(e){var t=function(e){return F(e,"LONG_ANSWER")}(e.id).register;return a.a.createElement("div",null,a.a.createElement("textarea",Object.assign({type:"text"},t())))}var ie,oe,le,ue,ce=d.a.div(Q||(Q=Object(s.a)(["\n  display: table;\n"]))),se=d.a.header(M||(M=Object(s.a)(["\n  display: table-row;\n"]))),de=d.a.div(V||(V=Object(s.a)(["\n  display: table-row;\n"]))),fe=d.a.div(Z||(Z=Object(s.a)(["\n  display: table-cell;\n  padding: 5px;\n"])));function me(e){var t=function(e){return G(e,"RADIO_GRID")}(e.id),r=t.columns,n=t.renderGrid;return a.a.createElement(ce,null,a.a.createElement(se,null,a.a.createElement(fe,null),r.map((function(e){return a.a.createElement(fe,{key:e.label},e.label)}))),n((function(e){return a.a.createElement(de,{key:e.label},a.a.createElement(fe,null,e.label),e.renderColumns((function(e){return a.a.createElement(fe,{key:e.label},a.a.createElement("input",Object.assign({type:"radio"},e.registerColumn())))})))})))}var pe,be,ve=d.a.div(ie||(ie=Object(s.a)(["\n  display: table;\n"]))),Oe=d.a.header(oe||(oe=Object(s.a)(["\n  display: table-row;\n"]))),Ee=d.a.div(le||(le=Object(s.a)(["\n  display: table-row;\n"]))),ge=d.a.div(ue||(ue=Object(s.a)(["\n  display: table-cell;\n  padding: 5px;\n"])));function he(e){var t=function(e){return G(e,"CHECKBOX_GRID")}(e.id),r=t.columns,n=t.renderGrid;return a.a.createElement(ve,null,a.a.createElement(Oe,null,a.a.createElement(ge,null),r.map((function(e){return a.a.createElement(ge,{key:e.label},e.label)}))),n((function(e){return a.a.createElement(Ee,{key:e.label},a.a.createElement(ge,null,e.label),e.renderColumns((function(e){return a.a.createElement(ge,{key:e.label},a.a.createElement("input",Object.assign({type:"checkbox"},e.registerColumn())))})))})))}function ye(e){var t=e.id,r=H(t),n=r.register,i=r.options;return a.a.createElement("div",null,a.a.createElement("select",n(),a.a.createElement("option",{value:""},"Select option"),i.map((function(e){return a.a.createElement("option",{key:e.label,value:e.label},e.label)}))))}var _e,Re,we,je=d.a.div(pe||(pe=Object(s.a)(["\n  display: flex;\n  align-items: center;\n\n  & * {\n    margin: 0 10px;\n  }\n  margin-bottom 10px;\n"]))),xe=d.a.span(be||(be=Object(s.a)(["\n  color: red;\n"])));function Se(e){var t=e.id,r=L(t),n=r.options,i=r.legend,o=r.error;return a.a.createElement(a.a.Fragment,null,a.a.createElement(je,null,a.a.createElement("div",null,i.labelFirst),n.map((function(e){return a.a.createElement("input",Object.assign({key:e.id,type:"radio"},e.registerOption()))})),a.a.createElement("div",null,i.labelLast)),a.a.createElement(xe,null,o&&"This field is required"))}var ke=d.a.form(_e||(_e=Object(s.a)(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 50px 0;\n"]))),Ie=d.a.div(Re||(Re=Object(s.a)(["\n  margin-bottom: 20px;\n"]))),Ae=d.a.h3(we||(we=Object(s.a)(["\n  margin-bottom: 10px;\n"]))),Ce=function(){return a.a.createElement("div",null,U.fields.map((function(e){var t=e.id,r=null;switch(e.type){case"CHECKBOX":r=a.a.createElement(Y,{id:t});break;case"RADIO":r=a.a.createElement(re,{id:t});break;case"SHORT_ANSWER":r=a.a.createElement(ne,{id:t});break;case"LONG_ANSWER":r=a.a.createElement(ae,{id:t});break;case"RADIO_GRID":r=a.a.createElement(me,{id:t});break;case"CHECKBOX_GRID":r=a.a.createElement(he,{id:t});break;case"DROPDOWN":r=a.a.createElement(ye,{id:t});break;case"LINEAR":r=a.a.createElement(Se,{id:t})}return r?a.a.createElement(Ie,{key:t},a.a.createElement(Ae,null,e.label),r):null})))},De=function(){var e=N({form:U}),t=function(){var t=Object(c.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(">>> Here is the data",r),t.next=3,e.submitToGoogleForms(r);case 3:alert("Form submitted with success!");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var e=Object(c.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://docs.google.com/forms/d/e/1FAIpQLSe5U3qvg8WHs4nkU-e6h2RlAD7fKoCkou6HO2w2-tXYIA_F8g/viewform");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(">>> Here are the errors!!!",e.formState.errors),a.a.createElement(D,e,a.a.createElement("button",{onClick:r},"Fetch"),a.a.createElement(ke,{onSubmit:e.handleSubmit(t)},a.a.createElement(Ce,null),a.a.createElement("button",{type:"submit"},"Submeter")))};o.a.render(a.a.createElement(De,null),document.getElementById("root"))},38:function(e){e.exports=JSON.parse('{"fvv":1,"pageHistory":0,"fbzx":"4367206215934512302","action":"e/1FAIpQLSe5U3qvg8WHs4nkU-e6h2RlAD7fKoCkou6HO2w2-tXYIA_F8g","fields":[{"label":"Where did you find this library?","type":"RADIO","id":"2081366314","options":[{"label":"Reddit","custom":false},{"label":"Stack Overflow","custom":false},{"label":"Github","custom":false},{"label":"Google","custom":false},{"label":"","custom":true}],"required":true},{"label":"How would you rate this library?","type":"LINEAR","id":"1587407061","legend":{"labelFirst":"Really bad","labelLast":"Really good"},"options":[{"label":"1"},{"label":"2"},{"label":"3"},{"label":"4"},{"label":"5"},{"label":"6"},{"label":"7"},{"label":"8"},{"label":"9"},{"label":"10"}],"required":true},{"label":"Do you want to give some feedback?","type":"LONG_ANSWER","id":"1864908950","required":false}],"fieldsOrder":{"1587407061":1,"1864908950":2,"2081366314":0}}')},81:function(e,t,r){e.exports=r(172)},82:function(e,t,r){}},[[81,1,2]]]);
//# sourceMappingURL=main.c73be242.chunk.js.map